import PySimpleGUI as sg
import roman_numerals_lib as roman_nums


# Entry Validity 
def valid_entry_f(value):
    value = str(value)
    if value[0].isnumeric():
        for i in value:
            if i.isnumeric():
                continue
            else:
                return False
    elif value[0].isalpha():
        for i in range(len(value)):
            if value[i].isalpha():
                if value[i] in roman_nums.dictionary.keys():
                    if i == 0:
                        continue
                    else:
                        if (roman_nums.dictionary.get(value[i-1]) * 10) < (roman_nums.dictionary.get(value[i])):
                            return False
                        else:
                            continue
                else:
                    return False
            else:
                return False
                
    else:
        return False
    return True


# Main Method

# if '__name__' == '__main__':
print("Welcome to the Roman Numeral Converter")
valid_entry = False 
while valid_entry == False:
    value = input("Input a Roman Numeral or Number: \n")


    # Checking Validity 
    value = value.upper().strip().replace(" ", "")
    valid_entry = valid_entry_f(value)

    # Valid Input 
    if valid_entry:
        rom_num = value.isalpha()
        if rom_num: 
            conversion = roman_nums.rom_num_func(value)
        else:
            conversion = roman_nums.numerical(value)
        print("Check the Results File")

        # Writing in a New File
        conversion = str(conversion)
        with open ("Results.txt", "w") as f:
            f.write("You inputted the value: " + value + "\n")
            f.write("Your result was: " + conversion)
            f.close()

    # Invalid Input
    else: 
        print("Your Entry was Invalid. Try Again")
